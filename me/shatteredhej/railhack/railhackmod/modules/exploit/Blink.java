//Deobfuscated with https://github.com/SimplyProgrammer/Minecraft-Deobfuscator3000 using mappings "C:\Users\Admin\Desktop\Minecraft-Deobfuscator3000-1.2.2\1.12 stable mappings"!

//Decompiled by Procyon!

package me.shatteredhej.railhack.railhackmod.modules.exploit;

import me.shatteredhej.railhack.railhackmod.module.*;
import me.shatteredhej.railhack.railhackmod.guiscreen.settings.*;
import net.minecraft.client.entity.*;
import me.shatteredhej.railhack.railhackmod.event.events.*;
import me.zero.alpine.fork.listener.*;
import me.shatteredhej.railhack.railhackmod.category.*;
import net.minecraft.network.play.client.*;
import java.util.function.*;
import net.minecraft.world.*;
import net.minecraft.entity.*;

public class Blink extends Module
{
    Setting render;
    Setting entityBlink;
    private EntityOtherPlayerMP fakePlayer;
    @EventHandler
    private Listener<EventPacket.SendPacket> listener;
    
    public Blink() {
        super(Category.Exploit);
        this.render = this.register("Render", "BlinkRender", false);
        this.entityBlink = this.register("EntityBlink", "BlinkEntity", false);
        this.listener = new Listener<EventPacket.SendPacket>(event -> {
            if (event.getPacket() instanceof CPacketPlayer || event.getPacket() instanceof CPacketConfirmTeleport || (this.entityBlink.getValue(true) && event.getPacket() instanceof CPacketVehicleMove)) {
                event.cancel();
            }
            return;
        }, (Predicate<EventPacket.SendPacket>[])new Predicate[0]);
        this.name = "Blink";
        this.tag = "Blink";
    }
    
    public void onEnable() {
        if (this.render.getValue(true)) {
            (this.fakePlayer = new EntityOtherPlayerMP((World)Blink.mc.world, Blink.mc.session.getProfile())).copyLocationAndAnglesFrom((Entity)Blink.mc.player);
            this.fakePlayer.rotationYawHead = Blink.mc.player.rotationYawHead;
            Blink.mc.world.addEntityToWorld(-100, (Entity)this.fakePlayer);
        }
    }
    
    public void whenDisabled() {
        if (this.render.getValue(true)) {
            try {
                Blink.mc.world.removeEntity((Entity)this.fakePlayer);
            }
            catch (Exception ex) {}
        }
    }
}
